---
name: brain-bootstrap
description: |
  Use when setting up BizBrain OS for the first time, when the user runs /brain setup,
  or when no brain folder is detected. Handles machine scanning, profile selection,
  brain folder creation, and initial CLAUDE.md generation.
version: 1.0.0
---

# Brain Bootstrap

You are setting up BizBrain OS — the AI context layer that teaches Claude the user's business.

## Process

### Step 1: Check for Existing Brain

Look for a brain folder in this order:
1. `BIZBRAIN_PATH` environment variable
2. `~/bizbrain-os/`
3. Ask the user where they want it (default: `~/bizbrain-os/`)

If a brain already exists, ask: "Found an existing brain at [path]. Reconfigure it, or start fresh?"

### Step 2: Gather Basic Info

Ask the user (one question at a time, use AskUserQuestion):
1. "What's your name?" (for the brain's owner field)
2. "What's your business or project name?" (or "What should we call your brain?")
3. Profile selection — present the 5 profiles with descriptions:
   - Developer / Technical Solopreneur
   - Content Creator
   - Consultant / Freelancer
   - Agency Owner
   - Personal / Life Organizer

### Step 3: Scan the Machine

Run the scanner script to discover:
- Code repositories (look in scan_paths.code from the selected profile)
- Documents and recent files
- Git history and collaborators
- Installed tools and package managers
- Claude Code configuration (existing MCPs, project contexts)
- Service configs (.env files, API keys)

Present a summary: "I found X projects, Y documents, Z services. Here's what I'll add to your brain:"

### Step 4: Create the Brain Folder

1. Create `~/bizbrain-os/` (or chosen path)
2. Read `${CLAUDE_PLUGIN_ROOT}/lib/folder-structure.json`
3. Create all `core` folders
4. Create `features` folders based on selected profile
5. Write `config.json` from `${CLAUDE_PLUGIN_ROOT}/lib/default-config.json` template, filled with user info + profile settings
6. Write `.bizbrain/state.json` with initial state
7. Write `.bizbrain/hooks-state.json` with auto_behaviors from profile

### Step 5: Populate from Scan Results

For each discovered project:
- Create `Projects/<name>/_meta.json` with repo path, stack, last activity
- Create `Projects/<name>/overview.md` with basic info

For each discovered service/credential:
- Add to `Operations/credentials/registry.json` (catalog only — don't copy secrets)

For each discovered entity (from git history collaborators):
- Queue for user confirmation: "Found these collaborators: [list]. Add any as entities?"

### Step 6: Generate CLAUDE.md

The brain's `CLAUDE.md` will be auto-generated by the SessionStart hook on next session.
Tell the user: "Brain created! Restart Claude Code to activate. Every session will now start with your full business context."

### Step 7: MCP Recommendations

Based on detected services (GitHub authenticated? Notion docs found?), recommend MCPs:
"I detected you use GitHub and Notion. Want me to configure their MCP servers?"

If yes, help set up each one conversationally.

## Important Notes

- Always use `${CLAUDE_PLUGIN_ROOT}` to reference plugin files
- Never copy credential values — only catalog what exists
- Write all brain data to the brain folder, never to the plugin directory
- The brain folder should be gitignored by default (add a .gitignore)
- Set `BIZBRAIN_PATH` environment variable for future sessions
